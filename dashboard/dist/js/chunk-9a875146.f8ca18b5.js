(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9a875146"],{"0706":function(module,exports){var indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},Object_keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)t.push(n);return t},forEach=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n++)t(e[n],n,e)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(e,t,n){Object.defineProperty(e,t,{writable:!0,enumerable:!1,configurable:!0,value:n})}}catch(e){return function(e,t,n){e[t]=n}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(e){if(!(this instanceof Script))return new Script(e);this.code=e};Script.prototype.runInContext=function(e){if(!(e instanceof Context))throw new TypeError("needs a 'context' argument.");var t=document.createElement("iframe");t.style||(t.style={}),t.style.display="none",document.body.appendChild(t);var n=t.contentWindow,r=n.eval,o=n.execScript;!r&&o&&(o.call(n,"null"),r=n.eval),forEach(Object_keys(e),(function(t){n[t]=e[t]})),forEach(globals,(function(t){e[t]&&(n[t]=e[t])}));var i=Object_keys(n),a=r.call(n,this.code);return forEach(Object_keys(n),(function(t){(t in e||-1===indexOf(i,t))&&(e[t]=n[t])})),forEach(globals,(function(t){t in e||defineProp(e,t,n[t])})),document.body.removeChild(t),a},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(e){var t=Script.createContext(e),n=this.runInContext(t);return e&&forEach(Object_keys(t),(function(n){e[n]=t[n]})),n},forEach(Object_keys(Script.prototype),(function(e){exports[e]=Script[e]=function(t){var n=Script(t);return n[e].apply(n,[].slice.call(arguments,1))}})),exports.isContext=function(e){return e instanceof Context},exports.createScript=function(e){return exports.Script(e)},exports.createContext=Script.createContext=function(e){var t=new Context;return"object"===typeof e&&forEach(Object_keys(e),(function(n){t[n]=e[n]})),t}},"077e":function(e,t,n){},"70a2":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sign-in"},[n("a-row",{attrs:{type:"flex",gutter:[24,24],justify:"space-around",align:"middle"}},[n("a-col",{staticClass:"col-form",attrs:{span:24,md:12,lg:{span:12,offset:0},xl:{span:6,offset:2}}},[n("h1",{staticClass:"mb-15"},[e._v("Phone Verification")]),e.authenticated?n("h5",{staticClass:"font-regular text-muted"},[e._v(" Enter sms code to proceed ")]):n("h5",{staticClass:"font-regular text-muted"},[e._v(" Enter your a valid phone number to verify ")]),e.authenticated?n("a-form",{staticClass:"login-form",attrs:{id:"components-form-demo-normal-login",form:e.form,hideRequiredMark:!0},on:{submit:e.confirmOtp}},[n("a-form-item",{staticClass:"mb-10",attrs:{label:"Confirmation CODE",colon:!1}},[n("a-input-group",{attrs:{compact:""}},[n("a-input",{staticStyle:{width:"calc(100% - 100px)"},attrs:{label:"Confirm Code",placeholder:"Code"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),n("a-button",{attrs:{type:"primary",id:"otp-verfiy-button"},on:{click:e.confirmOtp}},[e._v("Confirm")])],1)],1)],1):n("a-form",{staticClass:"login-form",attrs:{id:"components-form-demo-normal-login",form:e.form,hideRequiredMark:!0},on:{submit:function(t){return t.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[n("a-form-item",{staticClass:"mb-10",attrs:{label:"Phone Number",colon:!1}},[n("a-input-group",{attrs:{compact:""}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["phone_number",{rules:[{required:!0,message:"Please input your phone number!"}]}],expression:"[\n                'phone_number',\n                {\n                  rules: [\n                    {\n                      required: true,\n                      message: 'Please input your phone number!',\n                    },\n                  ],\n                },\n              ]"}],staticStyle:{width:"calc(100% - 100px)"},attrs:{placeholder:"705******","addon-before":"+254"}}),n("a-button",{attrs:{type:"primary","html-type":"submit",id:"otp-verfiy-button",loading:e.loading}},[e._v("VERIFY")])],1)],1)],1)],1),n("a-col",{staticClass:"col-img",attrs:{span:24,md:12,lg:12,xl:12}},[n("img",{attrs:{src:"images/signup-img.jpg",alt:""}})])],1)],1)},o=[],i=(n("0706"),n("dc59")),a=n("a18c"),s={data(){return{loading:!1,rememberMe:!0,authenticated:!1,code:""}},beforeCreate(){this.form=this.$form.createForm(this,{name:"normal_login"})},methods:{configureRecaptcha(){window.recaptchaVerifier=new i["d"].RecaptchaVerifier("otp-verfiy-button",{size:"invisible"})},sendOtpForVerification(e){this.configureRecaptcha();const t=window.recaptchaVerifier;i["b"].languageCode="en",i["b"].signInWithPhoneNumber(e,t).then(e=>{window.confirmationResult=e,this.$message.success("Otp sent successfully"),this.authenticated=!0,this.loading=!1}).catch(e=>{swal({title:"OOPS!",text:""+e.message,icon:"error"}),window.recaptchaVerifier.render().then((function(e){grecaptcha.reset(e)})),this.loading=!1})},confirmOtp(){this.loading=!0,window.confirmationResult.confirm(this.code).then(async e=>{console.log(e),a["a"].push("dashboard")}).catch(e=>{this.loading=!1,swal({title:"OOPS!",text:""+e.message,icon:"error"}),this.otpSent=!0,window.recaptchaVerifier.render().then((function(e){grecaptcha.reset(e)}))})},resendOtp(){this.sendOtpForVerification()},handleSubmit(e){e.preventDefault(),this.form.validateFields((e,t)=>{if(!e){this.loading=!0;const e="7",n="07",r="+254";if(t.phone_number.startsWith(e)){let e="+254"+t.phone_number;this.sendOtpForVerification(e),this.form.resetFields()}else if(t.phone_number.startsWith(n)){let e="+254"+t.phone_number.substring(1);this.sendOtpForVerification(e),this.form.resetFields()}else if(t.phone_number.startsWith(r)){let e="+254"+t.phone_number.substring(4);this.sendOtpForVerification(e),this.form.resetFields()}else this.$message.error("please enter a valid phone number format"),this.form.resetFields()}})}},computed:{},mounted(){}},c=s,u=(n("9763"),n("2877")),l=Object(u["a"])(c,r,o,!1,null,null,null);t["default"]=l.exports},9763:function(e,t,n){"use strict";n("077e")}}]);
//# sourceMappingURL=chunk-9a875146.f8ca18b5.js.map