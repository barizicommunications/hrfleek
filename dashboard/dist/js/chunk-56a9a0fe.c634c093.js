(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-56a9a0fe"],{"475a":function(t,e,a){"use strict";a("47cc")},"47cc":function(t,e,a){},cabc:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sign-in"},[a("a-row",{attrs:{type:"flex",gutter:[24,24],justify:"space-around",align:"middle"}},[a("a-col",{staticClass:"col-form",attrs:{span:24,md:12,lg:{span:12,offset:0},xl:{span:6,offset:2}}},[a("h1",{staticClass:"mb-15"},[t._v("Sign In")]),t.authenticated?a("h5",{staticClass:"font-regular text-muted"},[t._v(" Enter sms code to proceed ")]):a("h5",{staticClass:"font-regular text-muted"},[t._v(" Enter your email and password to sign in ")]),t.authenticated?a("a-form",{staticClass:"login-form",attrs:{id:"components-form-demo-normal-login",form:t.form,hideRequiredMark:!0},on:{submit:t.confirmOtp}},[a("a-form-item",{staticClass:"mb-10",attrs:{label:"Confirmation CODE",colon:!1}},[a("a-input-group",{attrs:{compact:""}},[a("a-input",{staticStyle:{width:"calc(100% - 100px)"},attrs:{label:"Confirm Code",placeholder:"Code"},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}}),a("a-button",{attrs:{type:"primary",id:"otp-verfiy-button"},on:{click:t.confirmOtp}},[t._v("Confirm")])],1)],1)],1):a("a-form",{staticClass:"login-form",attrs:{id:"components-form-demo-normal-login",form:t.form,hideRequiredMark:!0},on:{submit:t.handleSubmit}},[a("a-form-item",{staticClass:"mb-10",attrs:{label:"Email",colon:!1}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["email",{rules:[{required:!0,message:"Please input your email!"}]}],expression:"[\n              'email',\n              {\n                rules: [\n                  { required: true, message: 'Please input your email!' },\n                ],\n              },\n            ]"}],attrs:{placeholder:"Email"}})],1),a("a-form-item",{staticClass:"mb-5",attrs:{label:"Password",colon:!1}},[a("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"Please input your password!"}]}],expression:"[\n              'password',\n              {\n                rules: [\n                  { required: true, message: 'Please input your password!' },\n                ],\n              },\n            ]"}],attrs:{type:"password",placeholder:"Password"}})],1),a("a-form-item",[a("a-button",{staticClass:"login-form-button",attrs:{type:"primary",block:"","html-type":"submit",id:"otp-verfiy-button",loading:t.loading}},[t._v(" SIGN IN ")])],1)],1)],1),a("a-col",{staticClass:"col-img",attrs:{span:24,md:12,lg:12,xl:12}},[a("img",{attrs:{src:"images/signup-img.jpg",alt:""}})])],1)],1)},s=[],o=a("dc59"),r=a("2f62"),n=a("a18c"),l={data(){return{loading:!1,rememberMe:!0,authenticated:!1,code:""}},beforeCreate(){this.form=this.$form.createForm(this,{name:"normal_login"})},methods:{handleChange(t){t.preventDefault(),this.form.validateFields(async(t,e)=>{if(this.loading=!0,t)this.loading=!1;else{let t=this.clients.filter(t=>t.id===e.client_name);localStorage.setItem("client",JSON.stringify(t[0])),n["a"].push("/dashboard")}})},handleSubmit(t){t.preventDefault(),this.loading=!0,this.form.validateFields(async(t,e)=>{t?this.loading=!1:await o["a"].get().then(t=>{let a=[];t.docs.forEach(t=>{a.push(t.data())});let i=a.find(t=>t.email===e.email&&t.password===e.password);i?(console.log(i),this.sendOtpForVerification(i.phone),this.loading=!1):(swal({title:"OOps!",text:"Please check the credentials and try again",icon:"error"}),this.loading=!1)}).catch(t=>{this.loading=!1,console.log(t),swal({title:"OOps!",text:"something went wrong",icon:"error"})})})},configureRecaptcha(){window.recaptchaVerifier=new o["d"].RecaptchaVerifier("otp-verfiy-button",{size:"invisible"})},sendOtpForVerification(t){this.configureRecaptcha();const e=window.recaptchaVerifier;o["b"].languageCode="en",o["b"].signInWithPhoneNumber(t,e).then(t=>{window.confirmationResult=t,this.$message.success("Otp sent successfully"),this.authenticated=!0,this.loading=!1}).catch(t=>{swal({title:"OOPS!",text:""+t.message,icon:"error"}),window.recaptchaVerifier.render().then((function(t){grecaptcha.reset(t)})),this.loading=!1})},confirmOtp(){this.loading=!0,window.confirmationResult.confirm(this.code).then(async t=>{console.log(t),n["a"].push("dashboard")}).catch(t=>{this.loading=!1,swal({title:"OOPS!",text:""+t.message,icon:"error"}),this.otpSent=!0,window.recaptchaVerifier.render().then((function(t){grecaptcha.reset(t)}))})},resendOtp(){this.sendOtpForVerification()}},computed:{...Object(r["c"])(["clients"])},mounted(){this.$store.dispatch("getClients")}},c=l,d=(a("475a"),a("2877")),m=Object(d["a"])(c,i,s,!1,null,null,null);e["default"]=m.exports}}]);
//# sourceMappingURL=chunk-56a9a0fe.c634c093.js.map